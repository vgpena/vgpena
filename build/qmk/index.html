<!doctype html> <html lang=en-us> <head> <meta charset=utf-8> <link rel=alternate type="application/atom+xml" href="https://vgpena.github.io/feed.xml" title="Like, subscribe, &amp; download my mixtape"/> <meta property="og:type" content=website> <meta property="og:url" content="https://vgpena.github.io/qmk/"> <meta property="og:site_name" content="hey it's violet"> <meta property="og:title" content="Basic Keyboard Customization with QMK"> <meta property="og:description" content="The world of custom keyboards can be overwhelming to a newbie. Here's how I set up my custom keyboard layout using QMK from the command line."> <meta property="og:image" content="https://vgpena.github.io/images/kbd/og.jpg"> <meta name="twitter:domain" value="vgpena.github.io"> <meta property="twitter:title" content="Basic Keyboard Customization with QMK"> <meta property="twitter:description" ontent="The world of custom keyboards can be overwhelming to a newbie. Here's how I set up my custom keyboard layout using QMK from the command line."> <meta property="twitter:url" content="https://vgpena.github.io/qmk/"> <meta property="twitter:image" content="https://vgpena.github.io/images/kbd/og.jpg"> <meta name=author content="Violet Peña"> <meta name=description content="The world of custom keyboards can be overwhelming to a newbie. Here's how I set up my custom keyboard layout using QMK from the command line."> <meta name=viewport content="width=device-width, initial-scale=1"> <script>
  if ('FontFace' in window) {
    const fonts = [
      {
        name: 'Overpass Mono',
        files: [
          {
            fileName: 'OverpassMono-Light',
            weight: 'normal',
            style: 'normal',
          },
          {
            fileName: 'OverpassMono-Bold',
            weight: 'bold',
            style: 'normal',
          }
        ]
      },
      {
        name: 'Pitch Display',
        files: [
          {
            fileName: 'Pitch-Display',
            weight: 'normal',
            style: 'normal',
          }
        ]
      },
      {
        name: 'Karla',
        files: [
          {
            fileName: 'Karla-Regular',
            weight: 'normal',
            style: 'normal',
          },
          {
            fileName: 'Karla-Bold',
            weight: 'bold',
            style: 'normal',
          },
          {
            fileName: 'Karla-Italic',
            weight: 'normal',
            style: 'italic',
          },
          {
            fileName: 'Karla-BoldItalic',
            weight: 'bold',
            style: 'italic',
          },
        ]
      },
    ];

    fonts.forEach((font) => {
      font.files.forEach((file) => {
        const currFont = new FontFace(
          font.name,
          `url(/fonts/${ file.fileName }.woff2), url(/fonts/${ file.fileName }.woff)`,
          {
            weight: file.weight,
            style: file.style,
          }
        );

        currFont.load().then(() => {
          document.fonts.add(currFont);
        });
      });
    });
  }
</script> <script>
      window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)};ga.l=+new Date;
      ga('create', 'UA-92096829-1', 'auto');
      ga('send', 'pageview');
    </script> <script async src='https://www.google-analytics.com/analytics.js'></script> <title>Basic Keyboard Customization with QMK | hey it's violet</title> <link href="/styles/styles.css" rel=stylesheet media=screen /> </head> <body> <header id=site-header role=banner aria-label="Hey it's Violet: a blog"> <h1 id=site-title> <a href="/" aria-label="Back to home">Hey it's Violet</a> </h1> </header> <main> <article aria-labelledby=article-title> <div id=article-heading role=heading> <h1 id=article-title> Basic Keyboard Customization with QMK </h1> <div id=article-info> <h2 class=article-info-piece id=article-subtitle> A how-to, and a love letter to my custom keyboard. </h2> <h2 class=article-info-piece id=article-date aria-label="Published May 03, 2020"> 5.3.2020 </h2> </div> </div> <div class=content> <p>A few months ago, after a full year of waffling, I bought my first custom keyboard. During the setup process, I felt like most of the tutorials I was finding were geared towards people knowledgeable about keyboards and less familiar with programming in general. I&#39;m exactly the opposite of this -- over 10 years&#39; cumulative experience programming, but little knowledge of keyboards and their workings.</p> <p>Because of this, I kept notes as I customized my keyboard layout. Here&#39;s what I did, and I hope it helps you get started with your own custom setup 🤓</p> <p><figure role=img class=" image-secondary"> <img src="/images/kbd/top.JPG" alt="A pink-and-white keyboard." title="My custom keyboard." width=3024px height=4032px /> <figcaption> <p>My keyboard. What a beaut!</p> </figcaption> </figure></p> <h2 class=section-title id=why-a-custom-keyboard><a href='#why-a-custom-keyboard' class=section-inner>Why a Custom Keyboard?</a></h2> <p>I became interested in custom keyboards for aesthetic reasons. I was used to toggling between a chunky dark grey keyboard (when on a PC) or a slim silver one (for a Mac). Either way, keyboards were uniform and. Learning that there was another path -- of personal investment, care, and customization -- was intriguing to me.</p> <p>Cost was my largest blocker to actually buying a keyboard. The first custom keyboards I was linked to ran about $400; the kit I actually bought totaled $340. This is a <em>lot</em> of money, but I planned to use the keyboard for work. $400 for a tool I would use 40+ hours per week, I figured, was actually a reasonable expense when all was said and done.</p> <h2 class=section-title id=the-kit><a href='#the-kit' class=section-inner>The Kit</a></h2> <p>On the advice of a coworker, I bought a <a href="https://kbdfans.com/products/fully-assembled-tofu65-mechanical-keyboards">Tofu65 assembled keyboard</a> from <a href="https://kbdfans.com/">KBDFans.com</a>.</p> <aside class=aside> <h3 class=aside-title>Take note</h3> <p class=aside-body> This keyboard is sometimes called a Tofu67 instead of a Tofu65. </p> </aside> <p>I chose <a href="https://kbdfans.com/collections/cherry-switches/products/cherry-mx-silent-black">Cherry Silent Black</a> switches (to be considerate to officemates -- what innocent times those were). For keycaps, I found a <a href="https://kbdfans.com/products/bfcmmaxkey-pink-white-sa-profile-keycaps-set">pink-and-white Maxkey set</a> that would be a joy for me to use every day.</p> <p>The keyboard took about two months to arrive; using it was as simple as plugging it into my computer&#39;s USB port. The shipment included a little wire tool for lifting keycaps off of the board, so physically rearranging keys was also trivial. The other side of this process -- configuring the keyboard firmware to send the correct signals to the computer -- would be more difficult.</p> <p>A coworker advised me that getting set up to configure firmware would take a while, but would be worth the time. So I cleared my calendar one Saturday morning, poured myself a big cup of coffee, and got to work.</p> <h2 class=section-title id=creating-the-custom-layout><a href='#creating-the-custom-layout' class=section-inner>Creating the Custom Layout</a></h2> <p>Here&#39;s the process I followed to create and load a custom keyboard layout. This is what was useful to me, so some of these steps diverge from what you might find in other walkthroughs that assume more familiarity with keyboards in general.</p> <aside class=aside> <h3 class=aside-title>False start</h3> <p class=aside-body> I initially thought that customizing the keyboard layout would happen on the OS level. I spent some time poking around in the MacOS system preferences and even downloaded Ukelele before getting a vibe that I was headed in the wrong direction. Turns out that keyboard layouts are flashed onto the keyboard itself, not the computer. This means, among other things, that the layout is portable and can be used immediately on any computer that the keyboard is connected to. Which is really cool! </p> </aside> <h3 tabIndex=0>Download and configure the QMK Toolbox</h3> <p>My keyboard, like most others from KBDFans, is compatible with QMK firmware. Several of these next steps are paraphrases from the <a href="https://docs.qmk.fm/#/">QMK docs</a>.</p> <p>Start by installing QMK with Homebrew:</p> <div class=highlight><pre class="code shell"><code>brew tap qmk/qmk
brew install qmk
</code></pre></div> <p>This may take a while if Homebrew needs an update (which it always seems to??). Don&#39;t walk away for too long, though, since there are some interactive prompts to install dependencies of QMK.</p> <p>Next, fork the <a href="https://github.com/qmk/qmk_toolbox">QMK Toolbox repo on Github</a> and run the QMK setup command using this remote URL:</p> <div class=highlight><pre class="code shell"><code>qmk setup &lt;your_github_username&gt;/qmk_toolbox
</code></pre></div> <p>Finally, follow <a href="https://docs.qmk.fm/#/newbs_getting_started?id=_5-configure-your-build-environment-optional">QMK&#39;s customization instructions</a> to save yourself a lot of typing.</p> <h3 tabIndex=0>Design the layout</h3> <p>I did all of my layout editing in the online <a href="https://config.qmk.fm/#/kbdfans/kbd67/rev2/LAYOUT_65_ansi">QMK Configurator tool</a>. The drag-and-drop interface was simple to use, especially since I don&#39;t know much about the underlying processes. QMK has a good <a href="https://www.youtube.com/watch?v=-imgglzDMdY">video intro</a> to the configurator; I&#39;ll deviate from it in that I used QMK from the command line, not from a GUI.</p> <h4 tabIndex=0>Select the keyboard</h4> <p>Choose your keyboard type from the dropdown at the top of the configurator.</p> <p>In my case, my keyboard (<code>kbdfans/kbd65</code>) isn’t actually in the list of available keyboards in the QMK Configurator, but it is supported under the name <code>kbdfans/kbd67</code>. This keyboard defaults to the <code>LAYOUT_65_ansi</code> layout which matched my keyboard perfectly.</p> <aside class=aside> <p class=aside-body> Once I had the firmware installed, I was able to find a readme stating that kbd67 is just another name for kbd65. Confusing messaging, but everything worked as expected using the kbd67 option. </p> </aside> <h4 tabIndex=0>Design the layout map</h4> <p>This is the fun part! Drag and drop keys to where you actually want them. I won&#39;t get into using multiple layers, or any actual C programming 😅 It&#39;s very 1337 but not what I needed my first time around.</p> <h4 tabIndex=0>Download the layout</h4> <p>Since you already have the keyboard firmware installed, once you have your map made in the QMK Configurator, you can hit the <code>Download Keymap.json</code> button without compiling the layout. From now on you’ll be working completely in the command line, but keep this browser window open for follow-up tweaks to the layout.</p> <h3 tabIndex=0>Flash the layout onto the keyboard</h3> <aside class=aside> <h3 class=aside-title>Important</h3> <p class=aside-body> The following process assumes you have a second keyboard connected; e.g., a built-in laptop keyboard. If you don't have a second keyboard, you will probably need to activate speech-to-text or an onscreen mouse-accessible keyboard before following the next steps. </p> </aside> <p>Your keymap needs to be compiled in order to be flashed onto the keyboard. Locate the JSON file downloaded from the QMK configurator, and run:</p> <div class=highlight><pre class="code shell"><code>qmk compile &lt;path/to/downloaded/layout&gt;.json
</code></pre></div> <p>If successful, QMK will output a <code>.hex</code> file into its root directory. For me, this was at <code>Users/&lt;my_username&gt;/qmk_firmware</code>.</p> <p>Next, the keyboard needs to be put into DFU/Bootloader mode in order to be flashed. While in Bootloader mode, it will not send inputs to your computer like it normally does. If your keyboard underlight is on, the light will turn off when the board goes into Bootloader mode.</p> <p>Keyboard vary in how they can be sent into Bootloader mode. QMK has <a href="https://docs.qmk.fm/#/newbs_flashing?id=put-your-keyboard-into-dfu-bootloader-mode">instructions on different ways to do this</a> — the first time I flashed my keyboard, the Spacebar+B strategy worked. Subsequent times, this didn’t work, but unplugging my keyboard and plugging it back in with the ESC key pressed did send it into Bootloader mode correctly.</p> <aside class=aside> <p class=aside-body> I moved my ESC key the first time I flashed my keyboard, and I expected to hit the "new" ESC key to send it into Bootloader mode. Not so. The "original" ESC key, remapped to a different keycode, is still what needs to be pressed here. </p> </aside> <p>With your keyboard in Bootloader mode, run <code>qmk flash</code> on the command line to send your layout onto the keyboard. Don&#39;t unplug the keyboard until you get a message that the flash has completed. Now your keyboard is using your custom layout! 🎉</p> <p>You can flash your keyboard as many times as you want to. I flashed mine about ten times during that session as I honed what I actually wanted my keyboard to do.</p> <h2 class=section-title id=the-result><a href='#the-result' class=section-inner>The result</a></h2> <p>In the end, I have a keyboard that is completely tailored to what <em>I</em> want, and it feels glorious. In addition to a full keyboard, I have dedicated play/pause and volume up/down buttons. The volume buttons also let me skip tracks when paired with a modifier key 💅🏻 And, naturally, I have a couple of keys dedicated to toggling the keyboard underlight.</p> <aside class=aside> <p class=aside-body> I had NO IDEA that my keyboard had an underlight until I took it out of bootloader mode for the first time. On top of that, it's a full-spectrum underlight! So of course my default setting is to cycle through the entire rainbow. </p> </aside> <p><div class=" image-primary"> <img src="/images/kbd/win-2.JPG" alt="A pink-and-white keyboard." title="My custom keyboard." width=4032px height=3024px /> </div></p> <p>All in all, the time and money I&#39;ve invested in this keyboard has felt worth it -- because it <em>has</em> truly felt like an investment. I love having tools that feel good to use, that work well, that feel familiar to me. I&#39;ve been using this keyboard for about a month now; it&#39;s a little puff of wind in my sails whenever I sit down to work, and I look forward to many years with it.</p> <h2 class=section-title id=thank-you><a href='#thank-you' class=section-inner>Thank you</a></h2> <p>First, thanks for reading this far, and I hope it&#39;s been helpful!</p> <p>Thanks to <a href="http://egstad.com/">Jordan Egstad</a> for being an endless font of keyboard inspiration &amp; knowledge. Also, thank you for letting me borrow your &quot;starter keyboard&quot; for 😅 <strong>months</strong> 😅 as I decided what I was actually going to buy.</p> <p>Thanks also to <a href="https://angelariggs.github.io/">Angela Riggs</a> for additional keyboard intel, such as encouraging me to take my time setting up my dev environment.</p> </div> </article> </main> <footer> <nav id=footer-nav role=navigation aria-label="Navigate to Other Pages" class="footer-item noprint"> <ul id=footer-nav-links> <li class=footer-nav-link> <a href="/" class=footer-unit>Index</a> </li> <li class=footer-nav-link> <a href="/info" class=footer-unit>Info</a> </li> <li class=footer-nav-link> <a href="https://vgpena.github.io/feed.xml" class=footer-unit>RSS</a> </li> <li class=footer-nav-link> <a href="#" class=footer-unit>Top</a> </li> </ul> </nav> <div id=footer-colophon aria-label="Made with love in 2020" class="footer-item footer-unit noprint"> <div> &hearts; 2020 </div> <div class=footer-disclaimer>All opinions are my own.</div> </div> <div class="printonly aux"> http://violet.is || Violet Pe&ntilde;a || 2020 </div> </footer> </body> </html>